<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>DBD Random Character</title>

  <!-- Même police que les perks -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">

  <style>
    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      overflow: hidden;
      background: transparent; /* pour OBS */
      font-family: 'Roboto', sans-serif;
    }

    body.killer {
      --accent-color: #ff4444;
    }

    body.survivor {
      --accent-color: #44aaff;
    }

    #wrapper {
      box-sizing: border-box;
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      color: #fff;
      text-shadow: 0 0 8px rgba(0,0,0,0.9);
      padding: 10px;
    }

    /* Portrait 512x512, sans cadre */
    #portrait {
      width: 512px;
      height: 512px;
      background-position: center;
      background-size: cover;
      background-repeat: no-repeat;

      border-radius: 12px;
      box-shadow: 0 0 20px rgba(0,0,0,0.85);
      border: none;

      opacity: 0;
      transform: scale(0.9);
      animation: popIn 0.6s forwards;
    }

    /* Nom : même largeur que le portrait, gros, police des perks */
    #char-name {
      margin-top: 20px;
      width: 512px;              /* même largeur que le portrait */
      box-sizing: border-box;
      font-size: 40px;           /* bien plus grand */
      text-align: center;
      text-transform: uppercase; /* comme les noms de perks */
      font-weight: 700;          /* gras */

      padding: 14px 20px;
      border-radius: 999px;
      background: rgba(0,0,0,0.7);
      border: 2px solid var(--accent-color, #ffffff);
      color: #ffffff;

      opacity: 0;
      transform: translateY(10px);
      animation: fadeUp 0.6s forwards;
      animation-delay: 0.2s;
    }

    @keyframes popIn {
      to {
        opacity: 1;
        transform: scale(1);
      }
    }

    @keyframes fadeUp {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
  </style>
</head>
<body>
  <div id="wrapper">
    <div id="portrait"></div>
    <div id="char-name"></div>
  </div>

  <script>
    const KILLERS = [
      'The Animatronic','The Artist','The Blight','The Cannibal','The Cenobite',
      'The Clown','The Deathslinger','The Demogorgon','The Doctor','The Dracula',
      'The Dredge','The Executioner','The Ghoul','The Good Guy','The Hag',
      'The Hillbilly','The Houndmaster','The Huntress','The Knight','The Krasue',
      'The Legion','The Lich','The Mastermind','The Nemesis','The Nightmare',
      'The Nurse','The Oni','The Onryo','The Pig','The Plague','The Shape',
      'The Singularity','The Spirit','The Trapper','The Trickster','The Unknown',
      'The Wraith','The Xenomorph'
    ];

    const SURVIVORS = [
      'Ace Visconti','Ada Wong','Adam Francis','Alan Wake','Ashley J Williams',
      'Cheryl Mason','Claudette Morel','David King','Detective David Tapp',
      'Dwight Fairfield','Ellen Ripley','Elodie Rakoto','Felix Richter','Feng Min',
      'Gabriel Soma','Haddie Kaur','Jake Park','Jane Romero','Jeff Johansen',
      'Jill Valentine','Jonah Vasquez','Kate Denson','Lara Croft','Laurie Strode',
      'Leon S Kennedy','Meg Thomas','Michonne Grimes','Mikaela Reid','Nancy Wheeler',
      'Nea Karlsson','Nicolas Cage','Orela Rose','Quentin Smith','Rebecca Chambers',
      'Renato Lyra','Rick Grimes','Sable Ward','Steve Harrington','Taurie Cain',
      'Thalita Lyra','The Troupe','Trevor Belmont','Vee Boonyasak',
      'Vittorio Toscano','William Bill Overbeck','Yoichi Asakawa',
      'Yui Kimura','Yun Jin Lee','Zarina Kassir'
    ];

    function getTypeFromUrl() {
      const params = new URLSearchParams(window.location.search);
      const t = (params.get('type') || '').toLowerCase();
      if (t === 'kill' || t === 'killer' || t === 'k') return 'kill';
      if (t === 'surv' || t === 'survivor' || t === 's') return 'surv';
      return 'surv';
    }

    function pickRandom(list) {
      return list[Math.floor(Math.random() * list.length)];
    }

    function init() {
      const type = getTypeFromUrl();
      const isKiller = type === 'kill';

      document.body.classList.add(isKiller ? 'killer' : 'survivor');

      const pool = isKiller ? KILLERS : SURVIVORS;
      const picked = pickRandom(pool);

      const portrait = document.getElementById('portrait');
      const name = document.getElementById('char-name');

      const imgPath = isKiller
        ? `randomchar/img/kill/${picked}.png`
        : `randomchar/img/surv/${picked}.png`;

      portrait.style.backgroundImage = `url('${imgPath}')`;
      name.textContent = picked;
    }

    window.addEventListener('load', init);
  </script>
</body>
</html>
